<!DOCTYPE html>
<html>
<head>
    <title>Pablo Web App</title>
</head>

<body>
<h2>Pablo Web</h2>

<p>Trial version of the Pablo Web App. In development.</p>

<h3>Rules</h3>

<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Unum nescio, quo modo possit, si luxuriosus sit, finitas cupiditates habere. Heri, inquam, ludis commissis ex urbe profectus veni ad vesperum. Tanti autem aderant vesicae et torminum morbi, ut nihil ad eorum magnitudinem posset accedere. Iam illud quale tandem est, bona praeterita non effluere sapienti, mala meminisse non oportere? Isto modo, ne si avia quidem eius nata non esset. <b>Quarum ambarum rerum cum medicinam pollicetur, luxuriae licentiam pollicetur.</b> <b>Duo Reges: constructio interrete.</b> Contemnit enim disserendi elegantiam, confuse loquitur.</p>

<p>O magnam vim ingenii causamque iustam, cur nova existeret disciplina! Perge porro. Audeo dicere, inquit. Num igitur eum postea censes anxio animo aut sollicito fuisse? Bona autem corporis huic sunt, quod posterius posui, similiora. Negat enim summo bono afferre incrementum diem. Quid tanto concursu honestissimorum studiorum, tanto virtutum comitatu, si ea nullam ad aliam rem nisi ad voluptatem conquiruntur? Indicant pueri, in quibus ut in speculis natura cernitur. Sic enim maiores nostri labores non fugiendos tristissimo tamen verbo aerumnas etiam in deo nominaverunt. Quid est igitur, inquit, quod requiras? Summum ením bonum exposuit vacuitatem doloris; Totum autem id externum est, et quod externum, id in casu est. Piso igitur hoc modo, vir optimus tuique, ut scis, amantissimus. </p>

<p>Commoda autem et incommoda in eo genere sunt, quae praeposita et reiecta diximus; Num igitur eum postea censes anxio animo aut sollicito fuisse? Quae cum dixisset, finem ille. Sedulo, inquam, faciam. Ita multa dicunt, quae vix intellegam. Scientiam pollicentur, quam non erat mirum sapientiae cupido patria esse cariorem. Cupit enim dícere nihil posse ad beatam vitam deesse sapienti. </p>

<h3>Set-Up</h3>

<p>TODO: Add ability to set-up player names, number of players, etc here</p>

<h3>Scoreboard</h3>

<p id="console">Console</p>

<table style="width:100%">
<thead>
    <tr>
        <th id="play1">Player1</th>
        <th id="play2">Player2</th>
        <th id="play3">Player3</th>
        <th id="play4">Player4</th>
        <th id="play5">Player5</th>
        <th id="play6">Player6</th>
        <th id="play7">Player7</th>
        <th id="play8">Player8</th>
    </tr>
    <tr>
        <td id="disp1">Score1</td>
        <td id="disp2">Score2</td>
        <td id="disp3">Score3</td>
        <td id="disp4">Score4</td>
        <td id="disp5">Score5</td>
        <td id="disp6">Score6</td>
        <td id="disp7">Score7</td>
        <td id="disp8">Score8</td>
    </tr>
</thead>
<tbody id="tableBody">
    <tr>
        <td><input type="number" id="int-0-0"></td>
        <td><input type="number" id="int-0-1"></td>
        <td><input type="number" id="int-0-2"></td>
        <td><input type="number" id="int-0-3"></td>
        <td><input type="number" id="int-0-4"></td>
        <td><input type="number" id="int-0-5"></td>
        <td><input type="number" id="int-0-6"></td>
        <td><input type="number" id="int-0-7"></td>
    </tr>
    <tr>
        <td><input type="number" id="int-1-0"></td>
        <td><input type="number" id="int-1-1"></td>
        <td><input type="number" id="int-1-2"></td>
        <td><input type="number" id="int-1-3"></td>
        <td><input type="number" id="int-1-4"></td>
        <td><input type="number" id="int-1-5"></td>
        <td><input type="number" id="int-1-6"></td>
        <td><input type="number" id="int-1-7"></td>
    </tr>
    <tr>
        <td><input type="number" id="int-2-0"></td>
        <td><input type="number" id="int-2-1"></td>
        <td><input type="number" id="int-2-2"></td>
        <td><input type="number" id="int-2-3"></td>
        <td><input type="number" id="int-2-4"></td>
        <td><input type="number" id="int-2-5"></td>
        <td><input type="number" id="int-2-6"></td>
        <td><input type="number" id="int-2-7"></td>
    </tr>
    <tr>
        <td><input type="number" id="int-3-0"></td>
        <td><input type="number" id="int-3-1"></td>
        <td><input type="number" id="int-3-2"></td>
        <td><input type="number" id="int-3-3"></td>
        <td><input type="number" id="int-3-4"></td>
        <td><input type="number" id="int-3-5"></td>
        <td><input type="number" id="int-3-6"></td>
        <td><input type="number" id="int-3-7"></td>
    </tr>
    <tr>
        <td><input type="number" id="int-4-0"></td>
        <td><input type="number" id="int-4-1"></td>
        <td><input type="number" id="int-4-2"></td>
        <td><input type="number" id="int-4-3"></td>
        <td><input type="number" id="int-4-4"></td>
        <td><input type="number" id="int-4-5"></td>
        <td><input type="number" id="int-4-6"></td>
        <td><input type="number" id="int-4-7"></td>
    </tr>
    <tr>
        <td><input type="number" id="int-5-0"></td>
        <td><input type="number" id="int-5-1"></td>
        <td><input type="number" id="int-5-2"></td>
        <td><input type="number" id="int-5-3"></td>
        <td><input type="number" id="int-5-4"></td>
        <td><input type="number" id="int-5-5"></td>
        <td><input type="number" id="int-5-6"></td>
        <td><input type="number" id="int-5-7"></td>
    </tr>
    <tr>
        <td><input type="number" id="int-6-0"></td>
        <td><input type="number" id="int-6-1"></td>
        <td><input type="number" id="int-6-2"></td>
        <td><input type="number" id="int-6-3"></td>
        <td><input type="number" id="int-6-4"></td>
        <td><input type="number" id="int-6-5"></td>
        <td><input type="number" id="int-6-6"></td>
        <td><input type="number" id="int-6-7"></td>
    </tr>
</tbody>
</table>

<button onclick="compute()">Submit</button>

<p id="display"></p>

<script>
// TODO: Split up calcWin function into modules
        var numPlayers = 7;
        var numRows = 3;
        function calcWin() {
        // Function executes on "Submit" button press
        // Highlights winning and losing players
        // Announces winner and disables submit button

            // Declare variables
            var i, j, elementID, temp, currentRow, lastRow;
            var dat = new Array(numRows);     // default number of rows = 7
            for (i=0; i < numRows; i++) {
                // Initialises 2-dim array for data
                dat[i] = new Array(numPlayers);  // no. columns equals to no. players

                for (j=0; j < numPlayers; j++) {
                    // For each row, scan through each column and record input values
                    elementID = "int-"+i+"-"+j;
                    temp = document.getElementById(elementID).value;
                    if(temp == ""){
                        dat[i][j] = 0;
                    } else {
                        dat[i][j] = temp;
                    }
                }

                // Look at current row
                currentRow = dat[i];

                if (i == numRows - 1) {
                    numRows += 5;
                    var k = 0;
                    while (k < 5) {
                        document.getElementById("tableBody").insertRow(-1);
                        //TODO: Add input to new rows
                        k++;
                    }
                }
                // If current row is empty then break and return last non-zero row
                if (Math.max(...currentRow)==Math.min(...currentRow) && Math.max(...currentRow) == 0){
                    lastRow = dat[i-1];
                    break;
                } else {
                    lastRow = currentRow;
                }
            }

            // Find min and max values in last row
            var max = Math.max(...lastRow);
            var min = Math.min(...lastRow);

            var playIndex = 1;
            for (i=0;i<7;i++) {
                playIndex = i + 1;
                document.getElementById("play"+playIndex).style.background = "#FFFFFF";
                if(lastRow[i] == min) {
                    document.getElementById("play"+playIndex).style.background = "#00FF00";
                } else if(lastRow[i] == max) {
                    document.getElementById("play"+playIndex).style.background = "#FF0000";
                }
            }

            // Prints to output display
            document.getElementById("demo").innerHTML = "";
        }

    const sum = (accumulator, currentValue) => accumulator + currentValue;

    function player1Points() {
      var player1Score = [];
      for (i = 1; i < 11; i++) {
        var score = "score1" + i;
        var scoreValue = parseFloat(document.getElementById(score).value);
        if (isNaN(scoreValue)){player1Score.push(0)} else {
          player1Score.push(scoreValue);
        }
      }

   var currentPlayer1Score = player1Score;

    for (z = 0; z < 1000; z++){
          var arrayCheck = [];
          var arrayTotal = 0;
          for (i = 0; i < currentPlayer1Score.length; i++) {
            arrayCheck.push(currentPlayer1Score[i])
            arrayTotal = arrayCheck.reduce(sum);
            if (arrayTotal === 50) {
              for (x = 0; x < arrayCheck.length; x++) {
                currentPlayer1Score.shift();
              } break;
            }
          }
          arrayCheck = [];
          arrayTotal = 0;
        };
      document.getElementById("player1Total").innerHTML = currentPlayer1Score.reduce(sum);
      document.getElementById("player1Away").innerHTML = 50 - currentPlayer1Score.reduce(sum);
};

</script>

<noscript>Your browser does not allow JavaScript!</noscript>

</body>
</html>